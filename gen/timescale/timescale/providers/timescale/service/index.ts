// https://registry.terraform.io/providers/timescale/timescale/2.5.0/docs/resources/service
// generated from terraform resource schema

import { Construct } from 'constructs';
import * as cdktf from 'cdktf';

// Configuration

export interface ServiceConfig extends cdktf.TerraformMetaArguments {
  /**
  * Set connection pooler status for this service.
  *
  * Docs at Terraform Registry: {@link https://registry.terraform.io/providers/timescale/timescale/2.5.0/docs/resources/service#connection_pooler_enabled Service#connection_pooler_enabled}
  */
  readonly connectionPoolerEnabled?: boolean | cdktf.IResolvable;
  /**
  * Enable HA Replica (deprecated - use ha_replicas and sync_replicas instead)
  *
  * Docs at Terraform Registry: {@link https://registry.terraform.io/providers/timescale/timescale/2.5.0/docs/resources/service#enable_ha_replica Service#enable_ha_replica}
  */
  readonly enableHaReplica?: boolean | cdktf.IResolvable;
  /**
  * Set environment tag for this service.
  *
  * Docs at Terraform Registry: {@link https://registry.terraform.io/providers/timescale/timescale/2.5.0/docs/resources/service#environment_tag Service#environment_tag}
  */
  readonly environmentTag?: string;
  /**
  * Number of HA replicas (0, 1 or 2). Modes: 1 for 'High availability'; 2 'Highest availability'. Async replicas (i.e. 'High performance' mode) will be created by default if sync_replicas is not set.
  *
  * Docs at Terraform Registry: {@link https://registry.terraform.io/providers/timescale/timescale/2.5.0/docs/resources/service#ha_replicas Service#ha_replicas}
  */
  readonly haReplicas?: number;
  /**
  * The Log Exporter ID attached to this service.
  * 				WARNING: To complete the logs exporter attachment, a service restart is required.
  *
  * Docs at Terraform Registry: {@link https://registry.terraform.io/providers/timescale/timescale/2.5.0/docs/resources/service#log_exporter_id Service#log_exporter_id}
  */
  readonly logExporterId?: string;
  /**
  * Memory GB
  *
  * Docs at Terraform Registry: {@link https://registry.terraform.io/providers/timescale/timescale/2.5.0/docs/resources/service#memory_gb Service#memory_gb}
  */
  readonly memoryGb?: number;
  /**
  * The Exporter ID attached to this service.
  *
  * Docs at Terraform Registry: {@link https://registry.terraform.io/providers/timescale/timescale/2.5.0/docs/resources/service#metric_exporter_id Service#metric_exporter_id}
  */
  readonly metricExporterId?: string;
  /**
  * Milli CPU
  *
  * Docs at Terraform Registry: {@link https://registry.terraform.io/providers/timescale/timescale/2.5.0/docs/resources/service#milli_cpu Service#milli_cpu}
  */
  readonly milliCpu?: number;
  /**
  * Service Name is the configurable name assigned to this resource. If none is provided, a default will be generated by the provider.
  *
  * Docs at Terraform Registry: {@link https://registry.terraform.io/providers/timescale/timescale/2.5.0/docs/resources/service#name Service#name}
  */
  readonly name?: string;
  /**
  * The Postgres password for this service
  *
  * Docs at Terraform Registry: {@link https://registry.terraform.io/providers/timescale/timescale/2.5.0/docs/resources/service#password Service#password}
  */
  readonly password?: string;
  /**
  * Paused status of the service.
  *
  * Docs at Terraform Registry: {@link https://registry.terraform.io/providers/timescale/timescale/2.5.0/docs/resources/service#paused Service#paused}
  */
  readonly paused?: boolean | cdktf.IResolvable;
  /**
  * If set, this database will be a read replica of the provided source database. The region must be the same as the source, or if omitted will be handled by the provider
  *
  * Docs at Terraform Registry: {@link https://registry.terraform.io/providers/timescale/timescale/2.5.0/docs/resources/service#read_replica_source Service#read_replica_source}
  */
  readonly readReplicaSource?: string;
  /**
  * The region for this service.
  *
  * Docs at Terraform Registry: {@link https://registry.terraform.io/providers/timescale/timescale/2.5.0/docs/resources/service#region_code Service#region_code}
  */
  readonly regionCode?: string;
  /**
  * Deprecated: Storage GB
  *
  * Docs at Terraform Registry: {@link https://registry.terraform.io/providers/timescale/timescale/2.5.0/docs/resources/service#storage_gb Service#storage_gb}
  */
  readonly storageGb?: number;
  /**
  * Number of synchronous replicas (0 or 1). Set to 1 to enable 'High data integrity mode' (1 Sync and 1 Async replicas). To set sync_replicas to 1, you must also set ha_replicas to 2.
  *
  * Docs at Terraform Registry: {@link https://registry.terraform.io/providers/timescale/timescale/2.5.0/docs/resources/service#sync_replicas Service#sync_replicas}
  */
  readonly syncReplicas?: number;
  /**
  * Docs at Terraform Registry: {@link https://registry.terraform.io/providers/timescale/timescale/2.5.0/docs/resources/service#timeouts Service#timeouts}
  */
  readonly timeouts?: ServiceTimeouts;
  /**
  * The VpcID this service is tied to.
  *
  * Docs at Terraform Registry: {@link https://registry.terraform.io/providers/timescale/timescale/2.5.0/docs/resources/service#vpc_id Service#vpc_id}
  */
  readonly vpcId?: number;
}
export interface ServiceTimeouts {
  /**
  * A string that can be [parsed as a duration](https://pkg.go.dev/time#ParseDuration) consisting of numbers and unit suffixes, such as "30s" or "2h45m". Valid time units are "s" (seconds), "m" (minutes), "h" (hours).
  *
  * Docs at Terraform Registry: {@link https://registry.terraform.io/providers/timescale/timescale/2.5.0/docs/resources/service#create Service#create}
  */
  readonly create?: string;
}

export function serviceTimeoutsToTerraform(struct?: ServiceTimeouts | cdktf.IResolvable): any {
  if (!cdktf.canInspect(struct) || cdktf.Tokenization.isResolvable(struct)) { return struct; }
  if (cdktf.isComplexElement(struct)) {
    throw new Error("A complex element was used as configuration, this is not supported: https://cdk.tf/complex-object-as-configuration");
  }
  return {
    create: cdktf.stringToTerraform(struct!.create),
  }
}


export function serviceTimeoutsToHclTerraform(struct?: ServiceTimeouts | cdktf.IResolvable): any {
  if (!cdktf.canInspect(struct) || cdktf.Tokenization.isResolvable(struct)) { return struct; }
  if (cdktf.isComplexElement(struct)) {
    throw new Error("A complex element was used as configuration, this is not supported: https://cdk.tf/complex-object-as-configuration");
  }
  const attrs = {
    create: {
      value: cdktf.stringToHclTerraform(struct!.create),
      isBlock: false,
      type: "simple",
      storageClassType: "string",
    },
  };

  // remove undefined attributes
  return Object.fromEntries(Object.entries(attrs).filter(([_, value]) => value !== undefined && value.value !== undefined));
}

export class ServiceTimeoutsOutputReference extends cdktf.ComplexObject {
  private isEmptyObject = false;
  private resolvableValue?: cdktf.IResolvable;

  /**
  * @param terraformResource The parent resource
  * @param terraformAttribute The attribute on the parent resource this class is referencing
  */
  public constructor(terraformResource: cdktf.IInterpolatingParent, terraformAttribute: string) {
    super(terraformResource, terraformAttribute, false);
  }

  public get internalValue(): ServiceTimeouts | cdktf.IResolvable | undefined {
    if (this.resolvableValue) {
      return this.resolvableValue;
    }
    let hasAnyValues = this.isEmptyObject;
    const internalValueResult: any = {};
    if (this._create !== undefined) {
      hasAnyValues = true;
      internalValueResult.create = this._create;
    }
    return hasAnyValues ? internalValueResult : undefined;
  }

  public set internalValue(value: ServiceTimeouts | cdktf.IResolvable | undefined) {
    if (value === undefined) {
      this.isEmptyObject = false;
      this.resolvableValue = undefined;
      this._create = undefined;
    }
    else if (cdktf.Tokenization.isResolvable(value)) {
      this.isEmptyObject = false;
      this.resolvableValue = value;
    }
    else {
      this.isEmptyObject = Object.keys(value).length === 0;
      this.resolvableValue = undefined;
      this._create = value.create;
    }
  }

  // create - computed: false, optional: true, required: false
  private _create?: string; 
  public get create() {
    return this.getStringAttribute('create');
  }
  public set create(value: string) {
    this._create = value;
  }
  public resetCreate() {
    this._create = undefined;
  }
  // Temporarily expose input value. Use with caution.
  public get createInput() {
    return this._create;
  }
}

/**
* Represents a {@link https://registry.terraform.io/providers/timescale/timescale/2.5.0/docs/resources/service timescale_service}
*/
export class Service extends cdktf.TerraformResource {

  // =================
  // STATIC PROPERTIES
  // =================
  public static readonly tfResourceType = "timescale_service";

  // ==============
  // STATIC Methods
  // ==============
  /**
  * Generates CDKTF code for importing a Service resource upon running "cdktf plan <stack-name>"
  * @param scope The scope in which to define this construct
  * @param importToId The construct id used in the generated config for the Service to import
  * @param importFromId The id of the existing Service that should be imported. Refer to the {@link https://registry.terraform.io/providers/timescale/timescale/2.5.0/docs/resources/service#import import section} in the documentation of this resource for the id to use
  * @param provider? Optional instance of the provider where the Service to import is found
  */
  public static generateConfigForImport(scope: Construct, importToId: string, importFromId: string, provider?: cdktf.TerraformProvider) {
        return new cdktf.ImportableResource(scope, importToId, { terraformResourceType: "timescale_service", importId: importFromId, provider });
      }

  // ===========
  // INITIALIZER
  // ===========

  /**
  * Create a new {@link https://registry.terraform.io/providers/timescale/timescale/2.5.0/docs/resources/service timescale_service} Resource
  *
  * @param scope The scope in which to define this construct
  * @param id The scoped construct ID. Must be unique amongst siblings in the same scope
  * @param options ServiceConfig = {}
  */
  public constructor(scope: Construct, id: string, config: ServiceConfig = {}) {
    super(scope, id, {
      terraformResourceType: 'timescale_service',
      terraformGeneratorMetadata: {
        providerName: 'timescale',
        providerVersion: '2.5.0'
      },
      provider: config.provider,
      dependsOn: config.dependsOn,
      count: config.count,
      lifecycle: config.lifecycle,
      provisioners: config.provisioners,
      connection: config.connection,
      forEach: config.forEach
    });
    this._connectionPoolerEnabled = config.connectionPoolerEnabled;
    this._enableHaReplica = config.enableHaReplica;
    this._environmentTag = config.environmentTag;
    this._haReplicas = config.haReplicas;
    this._logExporterId = config.logExporterId;
    this._memoryGb = config.memoryGb;
    this._metricExporterId = config.metricExporterId;
    this._milliCpu = config.milliCpu;
    this._name = config.name;
    this._password = config.password;
    this._paused = config.paused;
    this._readReplicaSource = config.readReplicaSource;
    this._regionCode = config.regionCode;
    this._storageGb = config.storageGb;
    this._syncReplicas = config.syncReplicas;
    this._timeouts.internalValue = config.timeouts;
    this._vpcId = config.vpcId;
  }

  // ==========
  // ATTRIBUTES
  // ==========

  // connection_pooler_enabled - computed: true, optional: true, required: false
  private _connectionPoolerEnabled?: boolean | cdktf.IResolvable; 
  public get connectionPoolerEnabled() {
    return this.getBooleanAttribute('connection_pooler_enabled');
  }
  public set connectionPoolerEnabled(value: boolean | cdktf.IResolvable) {
    this._connectionPoolerEnabled = value;
  }
  public resetConnectionPoolerEnabled() {
    this._connectionPoolerEnabled = undefined;
  }
  // Temporarily expose input value. Use with caution.
  public get connectionPoolerEnabledInput() {
    return this._connectionPoolerEnabled;
  }

  // enable_ha_replica - computed: false, optional: true, required: false
  private _enableHaReplica?: boolean | cdktf.IResolvable; 
  public get enableHaReplica() {
    return this.getBooleanAttribute('enable_ha_replica');
  }
  public set enableHaReplica(value: boolean | cdktf.IResolvable) {
    this._enableHaReplica = value;
  }
  public resetEnableHaReplica() {
    this._enableHaReplica = undefined;
  }
  // Temporarily expose input value. Use with caution.
  public get enableHaReplicaInput() {
    return this._enableHaReplica;
  }

  // environment_tag - computed: true, optional: true, required: false
  private _environmentTag?: string; 
  public get environmentTag() {
    return this.getStringAttribute('environment_tag');
  }
  public set environmentTag(value: string) {
    this._environmentTag = value;
  }
  public resetEnvironmentTag() {
    this._environmentTag = undefined;
  }
  // Temporarily expose input value. Use with caution.
  public get environmentTagInput() {
    return this._environmentTag;
  }

  // ha_replicas - computed: true, optional: true, required: false
  private _haReplicas?: number; 
  public get haReplicas() {
    return this.getNumberAttribute('ha_replicas');
  }
  public set haReplicas(value: number) {
    this._haReplicas = value;
  }
  public resetHaReplicas() {
    this._haReplicas = undefined;
  }
  // Temporarily expose input value. Use with caution.
  public get haReplicasInput() {
    return this._haReplicas;
  }

  // hostname - computed: true, optional: false, required: false
  public get hostname() {
    return this.getStringAttribute('hostname');
  }

  // id - computed: true, optional: false, required: false
  public get id() {
    return this.getStringAttribute('id');
  }

  // log_exporter_id - computed: false, optional: true, required: false
  private _logExporterId?: string; 
  public get logExporterId() {
    return this.getStringAttribute('log_exporter_id');
  }
  public set logExporterId(value: string) {
    this._logExporterId = value;
  }
  public resetLogExporterId() {
    this._logExporterId = undefined;
  }
  // Temporarily expose input value. Use with caution.
  public get logExporterIdInput() {
    return this._logExporterId;
  }

  // memory_gb - computed: true, optional: true, required: false
  private _memoryGb?: number; 
  public get memoryGb() {
    return this.getNumberAttribute('memory_gb');
  }
  public set memoryGb(value: number) {
    this._memoryGb = value;
  }
  public resetMemoryGb() {
    this._memoryGb = undefined;
  }
  // Temporarily expose input value. Use with caution.
  public get memoryGbInput() {
    return this._memoryGb;
  }

  // metric_exporter_id - computed: false, optional: true, required: false
  private _metricExporterId?: string; 
  public get metricExporterId() {
    return this.getStringAttribute('metric_exporter_id');
  }
  public set metricExporterId(value: string) {
    this._metricExporterId = value;
  }
  public resetMetricExporterId() {
    this._metricExporterId = undefined;
  }
  // Temporarily expose input value. Use with caution.
  public get metricExporterIdInput() {
    return this._metricExporterId;
  }

  // milli_cpu - computed: true, optional: true, required: false
  private _milliCpu?: number; 
  public get milliCpu() {
    return this.getNumberAttribute('milli_cpu');
  }
  public set milliCpu(value: number) {
    this._milliCpu = value;
  }
  public resetMilliCpu() {
    this._milliCpu = undefined;
  }
  // Temporarily expose input value. Use with caution.
  public get milliCpuInput() {
    return this._milliCpu;
  }

  // name - computed: true, optional: true, required: false
  private _name?: string; 
  public get name() {
    return this.getStringAttribute('name');
  }
  public set name(value: string) {
    this._name = value;
  }
  public resetName() {
    this._name = undefined;
  }
  // Temporarily expose input value. Use with caution.
  public get nameInput() {
    return this._name;
  }

  // password - computed: true, optional: true, required: false
  private _password?: string; 
  public get password() {
    return this.getStringAttribute('password');
  }
  public set password(value: string) {
    this._password = value;
  }
  public resetPassword() {
    this._password = undefined;
  }
  // Temporarily expose input value. Use with caution.
  public get passwordInput() {
    return this._password;
  }

  // paused - computed: true, optional: true, required: false
  private _paused?: boolean | cdktf.IResolvable; 
  public get paused() {
    return this.getBooleanAttribute('paused');
  }
  public set paused(value: boolean | cdktf.IResolvable) {
    this._paused = value;
  }
  public resetPaused() {
    this._paused = undefined;
  }
  // Temporarily expose input value. Use with caution.
  public get pausedInput() {
    return this._paused;
  }

  // pooler_hostname - computed: true, optional: false, required: false
  public get poolerHostname() {
    return this.getStringAttribute('pooler_hostname');
  }

  // pooler_port - computed: true, optional: false, required: false
  public get poolerPort() {
    return this.getNumberAttribute('pooler_port');
  }

  // port - computed: true, optional: false, required: false
  public get port() {
    return this.getNumberAttribute('port');
  }

  // read_replica_source - computed: false, optional: true, required: false
  private _readReplicaSource?: string; 
  public get readReplicaSource() {
    return this.getStringAttribute('read_replica_source');
  }
  public set readReplicaSource(value: string) {
    this._readReplicaSource = value;
  }
  public resetReadReplicaSource() {
    this._readReplicaSource = undefined;
  }
  // Temporarily expose input value. Use with caution.
  public get readReplicaSourceInput() {
    return this._readReplicaSource;
  }

  // region_code - computed: true, optional: true, required: false
  private _regionCode?: string; 
  public get regionCode() {
    return this.getStringAttribute('region_code');
  }
  public set regionCode(value: string) {
    this._regionCode = value;
  }
  public resetRegionCode() {
    this._regionCode = undefined;
  }
  // Temporarily expose input value. Use with caution.
  public get regionCodeInput() {
    return this._regionCode;
  }

  // replica_hostname - computed: true, optional: false, required: false
  public get replicaHostname() {
    return this.getStringAttribute('replica_hostname');
  }

  // replica_port - computed: true, optional: false, required: false
  public get replicaPort() {
    return this.getNumberAttribute('replica_port');
  }

  // storage_gb - computed: false, optional: true, required: false
  private _storageGb?: number; 
  public get storageGb() {
    return this.getNumberAttribute('storage_gb');
  }
  public set storageGb(value: number) {
    this._storageGb = value;
  }
  public resetStorageGb() {
    this._storageGb = undefined;
  }
  // Temporarily expose input value. Use with caution.
  public get storageGbInput() {
    return this._storageGb;
  }

  // sync_replicas - computed: true, optional: true, required: false
  private _syncReplicas?: number; 
  public get syncReplicas() {
    return this.getNumberAttribute('sync_replicas');
  }
  public set syncReplicas(value: number) {
    this._syncReplicas = value;
  }
  public resetSyncReplicas() {
    this._syncReplicas = undefined;
  }
  // Temporarily expose input value. Use with caution.
  public get syncReplicasInput() {
    return this._syncReplicas;
  }

  // timeouts - computed: false, optional: true, required: false
  private _timeouts = new ServiceTimeoutsOutputReference(this, "timeouts");
  public get timeouts() {
    return this._timeouts;
  }
  public putTimeouts(value: ServiceTimeouts) {
    this._timeouts.internalValue = value;
  }
  public resetTimeouts() {
    this._timeouts.internalValue = undefined;
  }
  // Temporarily expose input value. Use with caution.
  public get timeoutsInput() {
    return this._timeouts.internalValue;
  }

  // username - computed: true, optional: false, required: false
  public get username() {
    return this.getStringAttribute('username');
  }

  // vpc_id - computed: false, optional: true, required: false
  private _vpcId?: number; 
  public get vpcId() {
    return this.getNumberAttribute('vpc_id');
  }
  public set vpcId(value: number) {
    this._vpcId = value;
  }
  public resetVpcId() {
    this._vpcId = undefined;
  }
  // Temporarily expose input value. Use with caution.
  public get vpcIdInput() {
    return this._vpcId;
  }

  // =========
  // SYNTHESIS
  // =========

  protected synthesizeAttributes(): { [name: string]: any } {
    return {
      connection_pooler_enabled: cdktf.booleanToTerraform(this._connectionPoolerEnabled),
      enable_ha_replica: cdktf.booleanToTerraform(this._enableHaReplica),
      environment_tag: cdktf.stringToTerraform(this._environmentTag),
      ha_replicas: cdktf.numberToTerraform(this._haReplicas),
      log_exporter_id: cdktf.stringToTerraform(this._logExporterId),
      memory_gb: cdktf.numberToTerraform(this._memoryGb),
      metric_exporter_id: cdktf.stringToTerraform(this._metricExporterId),
      milli_cpu: cdktf.numberToTerraform(this._milliCpu),
      name: cdktf.stringToTerraform(this._name),
      password: cdktf.stringToTerraform(this._password),
      paused: cdktf.booleanToTerraform(this._paused),
      read_replica_source: cdktf.stringToTerraform(this._readReplicaSource),
      region_code: cdktf.stringToTerraform(this._regionCode),
      storage_gb: cdktf.numberToTerraform(this._storageGb),
      sync_replicas: cdktf.numberToTerraform(this._syncReplicas),
      timeouts: serviceTimeoutsToTerraform(this._timeouts.internalValue),
      vpc_id: cdktf.numberToTerraform(this._vpcId),
    };
  }

  protected synthesizeHclAttributes(): { [name: string]: any } {
    const attrs = {
      connection_pooler_enabled: {
        value: cdktf.booleanToHclTerraform(this._connectionPoolerEnabled),
        isBlock: false,
        type: "simple",
        storageClassType: "boolean",
      },
      enable_ha_replica: {
        value: cdktf.booleanToHclTerraform(this._enableHaReplica),
        isBlock: false,
        type: "simple",
        storageClassType: "boolean",
      },
      environment_tag: {
        value: cdktf.stringToHclTerraform(this._environmentTag),
        isBlock: false,
        type: "simple",
        storageClassType: "string",
      },
      ha_replicas: {
        value: cdktf.numberToHclTerraform(this._haReplicas),
        isBlock: false,
        type: "simple",
        storageClassType: "number",
      },
      log_exporter_id: {
        value: cdktf.stringToHclTerraform(this._logExporterId),
        isBlock: false,
        type: "simple",
        storageClassType: "string",
      },
      memory_gb: {
        value: cdktf.numberToHclTerraform(this._memoryGb),
        isBlock: false,
        type: "simple",
        storageClassType: "number",
      },
      metric_exporter_id: {
        value: cdktf.stringToHclTerraform(this._metricExporterId),
        isBlock: false,
        type: "simple",
        storageClassType: "string",
      },
      milli_cpu: {
        value: cdktf.numberToHclTerraform(this._milliCpu),
        isBlock: false,
        type: "simple",
        storageClassType: "number",
      },
      name: {
        value: cdktf.stringToHclTerraform(this._name),
        isBlock: false,
        type: "simple",
        storageClassType: "string",
      },
      password: {
        value: cdktf.stringToHclTerraform(this._password),
        isBlock: false,
        type: "simple",
        storageClassType: "string",
      },
      paused: {
        value: cdktf.booleanToHclTerraform(this._paused),
        isBlock: false,
        type: "simple",
        storageClassType: "boolean",
      },
      read_replica_source: {
        value: cdktf.stringToHclTerraform(this._readReplicaSource),
        isBlock: false,
        type: "simple",
        storageClassType: "string",
      },
      region_code: {
        value: cdktf.stringToHclTerraform(this._regionCode),
        isBlock: false,
        type: "simple",
        storageClassType: "string",
      },
      storage_gb: {
        value: cdktf.numberToHclTerraform(this._storageGb),
        isBlock: false,
        type: "simple",
        storageClassType: "number",
      },
      sync_replicas: {
        value: cdktf.numberToHclTerraform(this._syncReplicas),
        isBlock: false,
        type: "simple",
        storageClassType: "number",
      },
      timeouts: {
        value: serviceTimeoutsToHclTerraform(this._timeouts.internalValue),
        isBlock: true,
        type: "struct",
        storageClassType: "ServiceTimeouts",
      },
      vpc_id: {
        value: cdktf.numberToHclTerraform(this._vpcId),
        isBlock: false,
        type: "simple",
        storageClassType: "number",
      },
    };

    // remove undefined attributes
    return Object.fromEntries(Object.entries(attrs).filter(([_, value]) => value !== undefined && value.value !== undefined ))
  }
}
